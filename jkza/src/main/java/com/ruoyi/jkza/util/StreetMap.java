package com.ruoyi.jkza.util;

import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONArray;
import com.ruoyi.jkza.domain.ScopeRequest;

import java.awt.geom.Path2D;
import java.util.ArrayList;
import java.util.List;

public class StreetMap {

    public static String  cnjd = "[120.7450820890001,30.742047484000068],[120.73721843500005,30.74270332800006],[120.73383839900009,30.742932496000037],[120.73291227300001,30.743224103000045],[120.73222825800008,30.743380697000077],[120.73048764900011,30.744115988000033],[120.7289218200001,30.74458299300005],[120.72812627100006,30.74460655100006],[120.72155851200012,30.74420413400003],[120.72195045600006,30.757767061000038],[120.71282723600007,30.757795628000054],[120.71097760200007,30.757567123000058],[120.71097220900003,30.757108148000043],[120.71007263700005,30.756904261000045],[120.70827459800012,30.756645615000025],[120.70585507100009,30.756420159000072],[120.70001029800005,30.755407758000047],[120.69667883600005,30.75324805500003],[120.68302744100004,30.746229889000062],[120.66791576100002,30.738504829000078],[120.65355346700005,30.730941260000066],[120.63702453600001,30.722334285000045],[120.63847247500007,30.719052926000074],[120.63981179000007,30.716068007000047],[120.6414445150001,30.71235613500005],[120.64196558200001,30.710959858000024],[120.64256257300008,30.70935318900007],[120.64273490100004,30.70868412200008],[120.64294056000006,30.708043528000076],[120.64344806500003,30.706275018000042],[120.6445193940001,30.702909539000075],[120.64592654000012,30.69855915100004],[120.6463817670001,30.69724909400003],[120.6479537560001,30.697756740000045],[120.65218378600002,30.69928200700008],[120.65439865300004,30.70010135900003],[120.65646975900006,30.70089276400006],[120.65791014100012,30.701525050000043],[120.66246625400004,30.703840636000052],[120.6801637750001,30.71485100700005],[120.68034817300008,30.71436320300006],[120.68054435500005,30.713980338000056],[120.68118860300001,30.712898275000043],[120.681254351,30.712821564000023],[120.68170811900006,30.712933732000067],[120.68231742800003,30.713169178000044],[120.68280460900007,30.713319351000052],[120.68307042800006,30.713413411000033],[120.6837471770001,30.71381077600006],[120.68386830000009,30.71375286400007],[120.68432395900004,30.71413229700005],[120.68636935300003,30.715897032000044],[120.68809252300002,30.717396157000053],[120.68884842000011,30.718041267000046],[120.68933685900004,30.718363234000037],[120.68983661800007,30.718723321000027],[120.69021464600007,30.71905541800004],[120.69031367500008,30.718997616000024],[120.69049762100008,30.718452523000053],[120.69064998700003,30.71812715300007],[120.69073789700008,30.718059865000043],[120.69277359400007,30.71844039700005],[120.69293938800001,30.71844905900008],[120.69302436300006,30.71797131200003],[120.69300158400006,30.717875976000073],[120.69220017200007,30.717049761000055],[120.69223236200003,30.71691594600003],[120.69262307100007,30.715930639000078],[120.69270900000004,30.715586530000053],[120.6926954270001,30.71523340500005],[120.6926159080001,30.714928361000034],[120.69256844100005,30.71447041400006],[120.69252118000009,30.714041101000078],[120.69251852000002,30.71366882700005],[120.69234018600002,30.713450223000052],[120.6917203480001,30.71329124600004],[120.69200179800009,30.712478348000047],[120.69242325300002,30.712568782000062],[120.69256612000004,30.712599436000062],[120.69289823400004,30.712693122000076],[120.69315205900011,30.712653585000055],[120.69353900500005,30.712689701000045],[120.69463410000003,30.712874765000038],[120.69484120300001,30.71248227500007],[120.69446482700005,30.712379285000054],[120.69456128200011,30.710421865000058],[120.69134304500005,30.710133880000058],[120.69008405600005,30.71002572100008],[120.68990288100008,30.709406202000025],[120.69035602600002,30.70943243100004],[120.6904095640001,30.709193500000026],[120.69062017600004,30.708504385000026],[120.69050219200005,30.708238420000043],[120.6905092940001,30.707684722000067],[120.69025432600006,30.707561982000072],[120.69031911400009,30.707351627000037],[120.69037339800002,30.707217695000054],[120.69251770000005,30.707368557000052],[120.69252458900007,30.706786221000073],[120.69259803000011,30.706241715000033],[120.69267338100008,30.70596448200007],[120.69270604500002,30.705897487000072],[120.69292698600009,30.705896309000025],[120.69321478800009,30.705975912000042],[120.69391228300003,30.706186969000044],[120.69526716400003,30.705635607000033],[120.69564612800002,30.70533288100006],[120.69562554900006,30.704774559000043],[120.69567187000007,30.704301789000056],[120.69572026300011,30.70386767100007],[120.69598560300005,30.70274222200004],[120.6960828120001,30.70243384500003],[120.69633512000007,30.70180246500007],[120.69664696100006,30.70138554700003],[120.70038630400006,30.69832268400006],[120.70029439900009,30.698215787000038],[120.70011187800003,30.69818097600006],[120.69981368700007,30.698189742000068],[120.69957297000008,30.698126604000038],[120.69930724400001,30.69804212300005],[120.69923201100005,30.69794945500007],[120.69924558700006,30.69753413500007],[120.69965188900005,30.697582064000073],[120.69975948500007,30.697567165000066],[120.70013640100001,30.695839715000034],[120.700069815,30.69579711600005],[120.69889986500004,30.695545680000066],[120.69869306600003,30.695589750000067],[120.69856926300008,30.69565484900005],[120.69787229600001,30.695508249000056],[120.69782778600006,30.69507892200005],[120.69769883300012,30.694428109000057],[120.69756247700002,30.69389904600007],[120.697399055,30.69306227000004],[120.69734595200009,30.692590034000034],[120.69785102300011,30.692551525000056],[120.6979249630001,30.692465215000027],[120.69764721100012,30.691858156000023],[120.69762992400001,30.69175801600005],[120.69813432000001,30.691626437000025],[120.69803861200012,30.690989762000072],[120.69869237500006,30.690893175000042],[120.69903071800002,30.693010541000035],[120.69934546400009,30.693001688000038],[120.69931823700006,30.69267250100006],[120.69945906600003,30.692671743000062],[120.69945787800009,30.692507083000066],[120.6997972150001,30.692462299000056],[120.69980684200004,30.692648391000034],[120.69986519300005,30.69269819300007],[120.70027960400012,30.69272459800004],[120.70032123200008,30.692753011000036],[120.70033623500001,30.69368365400004],[120.70049363400005,30.693682805000037],[120.70068744000002,30.69298729600007],[120.70078617600007,30.69289369200004],[120.70092690100012,30.69287861300006],[120.70095247800009,30.692978708000055],[120.7009696670001,30.693064527000047],[120.70066733500005,30.694791578000036],[120.70084969200002,30.69480491300004],[120.70089888100006,30.69473305200006],[120.70092285200008,30.69461121300003],[120.70126224900002,30.694573584000068],[120.70137025400004,30.694615958000043],[120.70128425300004,30.695325204000028],[120.70149985300009,30.695352677000074],[120.70153863300004,30.694987338000033],[120.70162100900006,30.694922458000065],[120.70162846500011,30.694807868000055],[120.70174382400012,30.69472133000005],[120.70268802200007,30.694687587000033],[120.70272152200005,30.694737522000025],[120.70248812200009,30.69568382700004],[120.70251359800011,30.695769604000077],[120.70260514200004,30.695826382000064],[120.70288680800002,30.695824858000037],[120.70294391700008,30.695702840000024],[120.7029930010001,30.69561666100003],[120.70315045500001,30.695622968000066],[120.70335844600004,30.695743552000067],[120.70345337000003,30.69588575000006],[120.7084839050001,30.69196368400003],[120.7138282410001,30.697719220000067],[120.7172112080001,30.695104107000077],[120.71865987900003,30.696814355000072],[120.72049363700012,30.69682328600004],[120.72122536100005,30.697181967000063],[120.72197833200005,30.697425976000034],[120.72252750000007,30.697002903000055],[120.72305315000006,30.696389044000057],[120.72377448000009,30.695354072000043],[120.72765150500004,30.69680247000008],[120.72791832500002,30.697030076000033],[120.72931644100004,30.700802389000046],[120.72994452000012,30.70205891100005],[120.73093366300009,30.701385139000024],[120.7355229530001,30.697655438000027],[120.74400281100009,30.692020811000077],[120.74629055000003,30.69450297000003],[120.74746743600008,30.696715609000023],[120.74783673000002,30.698049900000058],[120.74785329200006,30.70019761700007],[120.74756644700005,30.702394809000054],[120.74503561100005,30.71806449500008],[120.74298185500004,30.731201740000074],[120.74318859300001,30.732942662000028],[120.7450820890001,30.742047484000068]";
    public static String  jbjd = "[120.72195045600006,30.757767061000038],[120.72207063200005,30.761924615000055],[120.72439343300005,30.762126443000056],[120.72591965000004,30.762232461000053],[120.72699875100011,30.76241256000003],[120.72847739100007,30.762805184000058],[120.72836941500009,30.763879690000067],[120.72808034600007,30.765127033000056],[120.7278546870001,30.765987419000055],[120.72764398600009,30.766632939000033],[120.72743177500001,30.767078007000066],[120.72708659000011,30.76748086500004],[120.72695674200008,30.76785387700005],[120.72729353000011,30.77074435000003],[120.72756551300006,30.771630578000043],[120.72817312500001,30.773044713000047],[120.728475806,30.77360143900006],[120.72940163800001,30.77542901700008],[120.73021456400011,30.777672463000044],[120.73051943500002,30.778515544000072],[120.7311753680001,30.779728927000065],[120.73091166400002,30.77994519300006],[120.73034946500002,30.78016314000007],[120.72952290600006,30.780511439000065],[120.7288964170001,30.781001794000076],[120.7280716790001,30.781593490000034],[120.72756137100009,30.782097505000024],[120.72665944800008,30.78271945800003],[120.72536846600008,30.783800580000047],[120.72614793000002,30.784536013000036],[120.7270643490001,30.78510361800005],[120.72775678100004,30.785290650000036],[120.728836537,30.785523227000056],[120.73949178500004,30.787276577000057],[120.74825135600008,30.788026745000025],[120.73826333400007,30.805923519000032],[120.73667360000002,30.80593686700007],[120.73584354500008,30.805852092000066],[120.73359279700003,30.805268245000036],[120.71785588700004,30.80013587600007],[120.71468519500002,30.799046092000026],[120.71217562800007,30.797628046000057],[120.70994450300009,30.794967480000025],[120.7077512950001,30.791428460000077],[120.70589203300005,30.788173954000058],[120.70457239100006,30.784229192000055],[120.70739214500009,30.78239417900005],[120.70870128900003,30.78187991200008],[120.7105959920001,30.781123782000066],[120.71128498500002,30.780851529000074],[120.7111566420001,30.77279800100007],[120.71097760200007,30.757567123000058],[120.71282723600007,30.757795628000054],[120.72195045600006,30.757767061000038]";
    public static String  csjd = "[120.74400281100009,30.692020811000077],[120.74425260400005,30.69185481200003],[120.74644931400007,30.690238503000046],[120.75379981200001,30.683800339000072],[120.7566925860001,30.680843399000025],[120.76252087600005,30.674814527000024],[120.76643479300003,30.67257686100004],[120.76863991700009,30.67212472600005],[120.77184388900002,30.67229664900003],[120.77410030700003,30.672741426000073],[120.78005708500007,30.67465315100003],[120.78708122600005,30.677417260000027],[120.79191472700006,30.679659790000073],[120.79499974300006,30.681454651000024],[120.79784064500006,30.683098203000043],[120.80172722200007,30.68563254700007],[120.80590686900007,30.68885225100007],[120.80574818200012,30.693683399000065],[120.80582555700005,30.695019327000068],[120.80594378400008,30.695954080000035],[120.80610635400001,30.696907647000046],[120.80619948200001,30.697479816000055],[120.80629874500005,30.704103960000054],[120.79717025000002,30.70366394200005],[120.7965592170001,30.723408320000033],[120.80088983900009,30.723324397000056],[120.80078361300002,30.723840521000056],[120.80065480500002,30.726972318000037],[120.80068384600008,30.727812162000077],[120.80068952700003,30.728499421000038],[120.80113545500001,30.731646760000046],[120.80199205600002,30.739010765000046],[120.79766104900011,30.739132916000074],[120.79116428300006,30.739287239000078],[120.78979526100011,30.739448310000057],[120.78577533200007,30.739778177000062],[120.78100531400003,30.740284261000056],[120.7799884960001,30.740271286000052],[120.77669615700006,30.740386491000038],[120.77417644200011,30.740382457000067],[120.77472210300004,30.73952008300006],[120.77520344100003,30.738906281000027],[120.77532794500007,30.737893689000032],[120.77544464900006,30.73590747600008],[120.7753366820001,30.733464409000078],[120.77541798700008,30.729817445000037],[120.77558132700005,30.72813641700003],[120.77617561400007,30.72507821800008],[120.77599577300009,30.72469746400003],[120.77519811200011,30.724434949000056],[120.77398075100007,30.72419402400004],[120.77210213800004,30.724167028000068],[120.77040137100005,30.724272591000044],[120.76934083000003,30.72429797500007],[120.76852518200008,30.724550996000062],[120.76797561100011,30.72491698700003],[120.76735808000001,30.725073372000054],[120.76691581700004,30.72503780200003],[120.76697799900012,30.727309329000036],[120.76703970800008,30.73231094700003],[120.76730531500004,30.740728732000036],[120.76242267300006,30.74098661000005],[120.7450820890001,30.742047484000068],[120.74318859300001,30.732942662000028],[120.74298185500004,30.731201740000074],[120.74503561100005,30.71806449500008],[120.74756644700005,30.702394809000054],[120.74785329200006,30.70019761700007],[120.74783673000002,30.698049900000058],[120.74746743600008,30.696715609000023],[120.74629055000003,30.69450297000003],[120.74400281100009,30.692020811000077]";
    public static String  thjd = "[120.74825135600008,30.788026745000025],[120.75072174000002,30.788238199000034],[120.75243620000003,30.788323717000026],[120.75570301700009,30.788972916000034],[120.75953134800011,30.780168504000073],[120.7605877960001,30.780949831000044],[120.76103320600009,30.781352910000066],[120.76142296400008,30.781708585000047],[120.76183980400003,30.781992509000077],[120.76295119100007,30.782725764000077],[120.76362037100012,30.783461616000068],[120.76406806900002,30.784151042000076],[120.76434785800006,30.784578948000046],[120.76529515800007,30.785527929000068],[120.76729507000005,30.786757048000027],[120.76823141700004,30.786321947000033],[120.76971504300002,30.785191530000077],[120.77084312700003,30.784540494000055],[120.77152744400007,30.783701178000058],[120.77228684900001,30.781882977000066],[120.77274411700012,30.780305213000076],[120.77298541700009,30.779373071000066],[120.77394109000011,30.777911652000057],[120.77500862200009,30.77661660800004],[120.77728426600004,30.777772334000076],[120.79265251100003,30.784647638000024],[120.8042762550001,30.789730700000064],[120.8025847340001,30.792413963000058],[120.8020115920001,30.793300481000074],[120.8003371100001,30.794718812000042],[120.79261724300011,30.800565222000046],[120.79702632500005,30.80554963900005],[120.79630693900003,30.80615066100006],[120.79586736500005,30.80648745900004],[120.79584611500002,30.806592592000072],[120.79595756200001,30.80669690800005],[120.7961254810001,30.80694406200007],[120.79617191900002,30.80721105600003],[120.79562647600005,30.80812123900006],[120.79518398200003,30.80810486400003],[120.79528067800004,30.80776062700005],[120.7952342420001,30.80749363500007],[120.79521055400005,30.80730286800008],[120.79483080000011,30.806847009000023],[120.79468680700006,30.80681925500005],[120.79458822700008,30.80693440600004],[120.79447748700011,30.806915994000065],[120.79345510600001,30.80631133600008],[120.79342106800004,30.80620654200004],[120.7938149250001,30.805688667000027],[120.79381429800003,30.805612306000057],[120.79385727600004,30.805459314000075],[120.79402149900011,30.805257850000032],[120.79405373100008,30.805143103000034],[120.79313105200004,30.804556924000053],[120.79289742300011,30.80438653300007],[120.79274308100003,30.804444751000062],[120.79258912900002,30.804550696000035],[120.79244537500006,30.804551575000062],[120.79139252000004,30.804271638000046],[120.79139705700004,30.80482525700006],[120.79136662000008,30.805159539000044],[120.79126819300006,30.805293779000067],[120.79104622200009,30.805533774000025],[120.79009689300005,30.807770858000026],[120.78939982200006,30.80874159800004],[120.7889520440001,30.809770482000033],[120.78871034000008,30.810642990000076],[120.78867900800003,30.81188411200003],[120.78833269200004,30.81191008500008],[120.7865411570001,30.811920971000063],[120.78585280100003,30.811932306000074],[120.78527157000008,30.81185707700007],[120.78514646100007,30.811771926000063],[120.78552946900004,30.810931975000074],[120.78550324700007,30.810767472000066],[120.78220256300006,30.809806624000032],[120.78197456400005,30.810330623000027],[120.78179998400003,30.810281561000068],[120.78146665300005,30.811114041000053],[120.78148393400011,30.811199849000047],[120.78152610000006,30.811285506000047],[120.78133109700002,30.811787827000046],[120.77946980000002,30.811376641000038],[120.7783978970001,30.811139669000056],[120.77821513600009,30.811104973000056],[120.77805893400011,30.811277732000065],[120.77786137500004,30.811465058000067],[120.77763252000011,30.811542796000026],[120.7773834080001,30.811508495000055],[120.7771477340001,30.811426383000025],[120.77678582600004,30.81111832000005],[120.77671517400006,30.81092783200006],[120.77657444300007,30.810618442000077],[120.77640616400004,30.81032114800007],[120.7761830720001,30.810083845000065],[120.7759333890001,30.809977950000075],[120.77602948100002,30.809893850000037],[120.77616742700002,30.809857227000066],[120.77680953700008,30.808910749000063],[120.77676739500009,30.80882747700008],[120.77734105400009,30.807964930000026],[120.77742341400005,30.807892843000047],[120.77756174100011,30.807903947000057],[120.77791585300008,30.807245556000055],[120.77792871400004,30.807126160000053],[120.77788589900001,30.806959368000037],[120.77811637000002,30.806397177000065],[120.77073355300001,30.806262312000058],[120.76929974300003,30.80847826300004],[120.76926853000009,30.809418695000033],[120.76925937100009,30.80965739000004],[120.76956259700012,30.81023787500004],[120.76964183300004,30.810466501000064],[120.76958836600011,30.81069591200003],[120.76915354300002,30.811643512000046],[120.76881353100009,30.811998720000076],[120.76859372100012,30.812171845000023],[120.7684494990001,30.812115428000027],[120.76817105200007,30.811868892000064],[120.76773770300008,30.811613727000065],[120.7671158280001,30.81129285700007],[120.76687147100006,30.811160664000056],[120.76670399800003,30.81096119600005],[120.76660272700008,30.81074224500003],[120.76670603700006,30.809825252000053],[120.76669331000005,30.80961532400005],[120.76654810800005,30.80943481500003],[120.76613757400003,30.809265421000077],[120.76557184600006,30.809049215000073],[120.76507292300005,30.808889884000052],[120.76466164100009,30.808625033000055],[120.76448646500012,30.80849958600004],[120.76394218500002,30.808896554000057],[120.76353917900008,30.809328484000048],[120.76323824400004,30.809907171000077],[120.76308656600008,30.809955794000075],[120.76287742200009,30.80973031700006],[120.7619990180001,30.808780918000025],[120.76195830400002,30.80887661400004],[120.76190414100006,30.809020117000046],[120.76175264800008,30.80909260100003],[120.76064405900001,30.810507097000027],[120.75959903900002,30.809463203000064],[120.75879212900008,30.808811666000054],[120.75625220000006,30.807513983000035],[120.75250017100007,30.804994289000035],[120.74972944100011,30.811334353000063],[120.74774748800007,30.81067760800005],[120.74845604400002,30.80934905600003],[120.74847851200002,30.80868073000005],[120.74818702100004,30.808527295000033],[120.74824129700005,30.80839572800005],[120.7477702000001,30.808255263000035],[120.74783755900012,30.808028164000063],[120.74717201700003,30.807769497000038],[120.74685740900009,30.80820086600005],[120.7467041540001,30.808046631000025],[120.74769709700001,30.80584391000008],[120.73826333400007,30.805923519000032],[120.74825135600008,30.788026745000025]";
    public static String  sjy = "[120.69217443466187,30.74318200544387],[120.70350408554076,30.74694413392058],[120.70560693740843,30.736690144151325],[120.70869684219359,30.72650884452338],[120.70685148239136,30.724774965315802],[120.69938421249387,30.731230740409316],[120.6954789161682,30.736136840289518],[120.69217443466187,30.74318200544387]";

    /** * 使用Path2D创建一个多边形
     * @param polygon 经纬度 集合
     * @return 返回Path2D.Double
     */
    private static Path2D.Double create(List<ScopeRequest> polygon) {

        //创建path2D对象

        Path2D.Double generalPath = new Path2D.Double();

        //获取第一个起点经纬度的坐标

        ScopeRequest first = polygon.get(0);

        //通过移动到以double精度指定的指定坐标，把第一个起点添加到路径中

        generalPath.moveTo(first.getLongitude(), first.getLatitude());

        //把集合中的第一个点删除防止重复添加

        polygon.remove(0);

        //循环集合里剩下的所有经纬度坐标

        for (ScopeRequest d : polygon) {

            //通过从当前坐标绘制直线到以double精度指定的新指定坐标，将路径添加到路径。

            //从第一个点开始，不断往后绘制经纬度点

            generalPath.lineTo(d.getLongitude(), d.getLatitude());

        }

        // 最后要多边形进行封闭，起点及终点

        generalPath.lineTo(first.getLongitude(), first.getLatitude());

        //将直线绘制回最后一个 moveTo的坐标来关闭当前子路径。

        generalPath.closePath();

        return generalPath;

    }

    //循环遍历是否在某个街道
    public static Integer forIsStreet(double longitude, double latitude){
        String polygon = "";
        for(int i = 0; i < 5; i++){
            boolean temp = false;
            if(i == 0){
                polygon = cnjd;
            }
            if(i == 1){
                polygon = jbjd;
            }
            if(i == 2){
                polygon = csjd;
            }
            if(i == 3){
                polygon = thjd;
            }
            if(i == 4){
                polygon = StreetMap.sjy;
            }
            temp = StreetMap.isStreet(polygon,longitude,latitude);
            if(temp){
                return i;
            }
        }
        return 5;
    }
    //判断是否在某个街道
    public static boolean isStreet(String polygon, double longitude, double latitude) {
//    public static boolean isStreet() {

        String str = polygon.replace("[","");
        str = str.replace("]","");
        String[] strs = str.split(",");
        List<ScopeRequest> list = new ArrayList<>();
        for (int i = 0; i < strs.length; i+=2) {
            ScopeRequest scopeRequest = new ScopeRequest();
            scopeRequest.setLongitude(Double.valueOf(strs[i]));
            scopeRequest.setLatitude(Double.valueOf(strs[i+1]));
            list.add(scopeRequest);
        }
//        JSONArray jsonArray = JSON.parseArray(polygon);
//
//        //将json转换成对象
//
//        List<ScopeRequest> list = JSON.parseArray(jsonArray.toJSONString(), ScopeRequest.class);
//
        Path2D path2D = create(list);

        //true如果指定的坐标在Shape边界内; 否则为false 。

        return path2D.contains(longitude, latitude);
    }

    //判断点是否在区域内
    public static boolean isPoint(String polygon, double longitude, double latitude) {

        JSONArray jsonArray = JSON.parseArray(polygon);

        //将json转换成对象

        List<ScopeRequest> list = JSON.parseArray(jsonArray.toJSONString(), ScopeRequest.class);

        Path2D path2D = create(list);

        //true如果指定的坐标在Shape边界内; 否则为false 。

        return path2D.contains(longitude, latitude);
    }

}
